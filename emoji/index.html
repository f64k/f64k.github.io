<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>emoji robots</title>
    <style>
        html,
        body {
            margin: 0;
            border: 0;
            min-height: 100% !important;
            height: 100%;
            overflow: hidden;
        }

        *,
        *:after,
        *:before {
            box-sizing: border-box;
        }

        [hidden] {
            display: none !important;
        }

        /*https://codepen.io/cjimmy/pen/RwVmgGR?editors=1100*/
        /*https://yoksel.github.io/url-encoder/*/
        .noise_004 {
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='nf'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.004' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23nf)'/%3E%3C/svg%3E");
        }

        body {
            display: grid;
            grid-template-columns: 1fr;
            grid-template-rows: 1fr auto;
        }

        .world {
            grid-column: 1;
            grid-row: 1;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='nf'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.004' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23nf)'/%3E%3C/svg%3E");
            margin: 0px;
            border: 1em dotted #4444;
            height: 100%;
        }

        #error-log {
            grid-column: 1;
            grid-row: 2;
            overflow: scroll;
            height: 10em;
            border: 3px solid #000;
        }
    </style>
    <script type="text/javascript" src="emoji.js"></script>
</head>

<body>
    <div class="world" id="worldplace"></div>
    <div id="error-log"></div>
</body>

<script>
    class RobotEmo {
        constructor(w, name, size) {
            this.w = w;
            this.name = name;
            this.size = size;
        }
    }

    class World2d {
        constructor(oRobotTypes) {
            this.oRobotTypes = oRobotTypes;
            this.worldplace = document.getElementById("worldplace");
            //this.worldplace.innerHTML = "<span id='slog'>started ...</span>"
            console.log("constructor World2d");
            console.log(`Object.keys(this.oRobotTypes).length=${Object.keys(this.oRobotTypes).length}`);
            this.robots = {};
        }
        ///
        addRobot(name) {
            const cntName = Object.values(this.robots).filter(r => r.name == name).length;
            robotKey = `${name}.${cntName+1}`;
            this.robots[robotKey] = new RobotEmo(this, name, 1);
        }
    }

    const w2d = new World2d(ObjEmoji);
</script>

<script>
    console.log = (function (old_function, div_log) {
        return function (text) {
            old_function(text);
            div_log.value += text;
        };
    }(console.log.bind(console), document.getElementById("error-log")));    
</script>

</html>